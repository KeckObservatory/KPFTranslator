{
    "metadata": {
        "instrument": "KPF",
        "name": "kpf_sci",
        "script": "BEGIN_SLEW\nCONFIGURE_SCIENCE # Executes Slew Cal\nWAITFOR_CONFIGURE_SCIENCE # Slew Cal is done, ready for science observation\nWAITFOR_SLEW\nACQUIRE # OA acquires to PO and starts tip tilt loop\nWAITFOR_ACQUIRE\nEXECUTE_OBSERVATION\n",
        "script_version": "0.3.0",
        "template_type": "science",
        "ui_name": "KPF science",
        "version": "0.3.0"
    },
    "parameters": {
        "allow_slew_cal": {
            "default": true,
            "description": "Allow calibration during slew?",
            "option": "boolean",
            "optionality": "required",
            "type": "boolean",
            "ui_name": "Allow calibration during slew?",
            "units": null
        },
        "em_active": {
            "default": true,
            "description": "Trigger exposure meter during exposures?",
            "option": "boolean",
            "optionality": "required",
            "type": "boolean",
            "ui_name": "Trigger exposure meter during exposures?",
            "units": null
        },
        "em_band": {
            "allowed": [
                1,
                2,
                3,
                4
            ],
            "default": 1,
            "description": "Which wavelength band of the exposure meter to use for termination condition?",
            "option": "set",
            "optionality": "optional",
            "type": "int",
            "ui_name": "Which wavelength band of the exposure meter to use for termination condition?",
            "units": null
        },
        "em_flux": {
            "allowed": [
                1,
                1000000000.0
            ],
            "default": 100000.0,
            "description": "What flux value should trigger the exposure termination?",
            "option": "range",
            "optionality": "optional",
            "type": "float",
            "ui_name": "What flux value should trigger the exposure termination?",
            "units": null
        },
        "em_termination": {
            "default": false,
            "description": "Use exposure meter flux to determine exposure end?",
            "option": "boolean",
            "optionality": "required",
            "type": "boolean",
            "ui_name": "Use exposure meter flux to determine exposure end?",
            "units": null
        },
        "guide_camgain": {
            "allowed": [
                "high",
                "medium",
                "low"
            ],
            "default": "high",
            "description": "Only used if guide mode is manual",
            "option": "set",
            "optionality": "required",
            "type": "str",
            "ui_name": "Guider camera gain (high, medium, or low).",
            "units": null
        },
        "guide_fps": {
            "allowed": [
                0.01,
                400
            ],
            "default": 100,
            "description": "Only used if guide mode is manual",
            "option": "range",
            "optionality": "required",
            "type": "float",
            "ui_name": "Guider frames per second.",
            "units": null
        },
        "guide_loopgain": {
            "allowed": [
                0.01,
                1
            ],
            "default": 0.2,
            "description": "Tip tilt loop gain",
            "option": "range",
            "optionality": "required",
            "type": "float",
            "ui_name": "Tip tilt loop gain",
            "units": null
        },
        "guide_mode": {
            "allowed": [
                "off",
                "telescope",
                "manual",
                "auto"
            ],
            "default": "manual",
            "description": "off = do not guide,\ntelescope = use slow telescope guiding only,\nmanual = use tip tilt with manually configured exposure parameters,\nauto = use tip tilt with automatically configured exposure parameters",
            "option": "set",
            "optionality": "required",
            "type": "str",
            "ui_name": "Guide camera exposure mode.",
            "units": null
        },
        "obs_sequence": {
            "allowed": {
                "calnd1": {
                    "allowed": [
                        "OD 0.1",
                        "OD 1.0",
                        "OD 1.3",
                        "OD 2.0",
                        "OD 3.0",
                        "OD 4.0"
                    ],
                    "default": "OD 0.1",
                    "description": "Filter to use in the ND1 filter wheel",
                    "option": "set",
                    "optionality": "required",
                    "type": "str",
                    "ui_name": "Filter to use in the ND1 filter wheel",
                    "units": null
                },
                "calnd2": {
                    "allowed": [
                        "OD 0.1",
                        "OD 0.3",
                        "OD 0.5",
                        "OD 0.8",
                        "OD 1.0",
                        "OD 4.0"
                    ],
                    "default": "OD 0.1",
                    "description": "Filter to use in the ND2 filter wheel",
                    "option": "set",
                    "optionality": "required",
                    "type": "str",
                    "ui_name": "Filter to use in the ND2 filter wheel",
                    "units": null
                },
                "calsource": {
                    "allowed": [
                        "Home",
                        "EtalonFiber",
                        "BrdbandFiber",
                        "U_gold",
                        "U_daily",
                        "Th_daily",
                        "Th_gold",
                        "SoCal-CalFib",
                        "LFCFiber"
                    ],
                    "default": "Home",
                    "description": "Calibration source to use",
                    "option": "set",
                    "optionality": "required",
                    "type": "str",
                    "ui_name": "Calibration source to use",
                    "units": null
                },
                "exptime": {
                    "allowed": [
                        0.1,
                        3600
                    ],
                    "default": 1,
                    "description": "Exposure time in seconds",
                    "option": "range",
                    "optionality": "required",
                    "type": "float",
                    "ui_name": "Exposure time in seconds",
                    "units": "seconds"
                },
                "n_exposures": {
                    "allowed": [
                        1,
                        100
                    ],
                    "default": 1,
                    "description": "Number of exposures to take",
                    "option": "range",
                    "optionality": "required",
                    "type": "int",
                    "ui_name": "Number of exposures to take",
                    "units": null
                },
                "object": {
                    "default": "",
                    "description": "Value for the object keyword",
                    "option": "open",
                    "optionality": "optional",
                    "type": "string",
                    "ui_name": "Value for the object keyword",
                    "units": null
                },
                "sss_science": {
                    "default": false,
                    "description": "Should the source select shutter for science be open?",
                    "option": "boolean",
                    "optionality": "required",
                    "type": "boolean",
                    "ui_name": "Should the source select shutter for science be open?",
                    "units": null
                },
                "sss_sky": {
                    "default": false,
                    "description": "Should the source select shutter for sky be open?",
                    "option": "boolean",
                    "optionality": "required",
                    "type": "boolean",
                    "ui_name": "Should the source select shutter for sky be open?",
                    "units": null
                },
                "ts_simulcal": {
                    "default": false,
                    "description": "Should the timed shutter for simultaneous calibration fiber be opened during exposure?",
                    "option": "boolean",
                    "optionality": "required",
                    "type": "boolean",
                    "ui_name": "Should the timed shutter for simultaneous calibration fiber be opened during exposure?",
                    "units": null
                }
            },
            "description": "Observation sequence",
            "option": "set",
            "optionality": "required",
            "type": "array",
            "ui_name": "Observation sequence",
            "units": null
        },
        "triggercahk": {
            "default": false,
            "description": "Trigger the Ca H&K detector?",
            "option": "boolean",
            "optionality": "required",
            "type": "boolean",
            "ui_name": "Trigger the Ca H&K detector?",
            "units": null
        },
        "triggergreen": {
            "default": false,
            "description": "Trigger the green detector?",
            "option": "boolean",
            "optionality": "required",
            "type": "boolean",
            "ui_name": "Trigger the green detector?",
            "units": null
        },
        "triggerred": {
            "default": false,
            "description": "Trigger the red detector?",
            "option": "boolean",
            "optionality": "required",
            "type": "boolean",
            "ui_name": "Trigger the red detector?",
            "units": null
        }
    }
}